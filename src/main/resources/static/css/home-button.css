:root { --corner-pad: clamp(8px,2vw,20px); }

.hamburger.at-tr{ position:fixed; top:var(--corner-pad); right:var(--corner-pad); z-index:30; }

.hamburger > summary{ list-style:none; appearance:none; cursor:pointer; }
.hamburger > summary::-webkit-details-marker{ display:none; }
.hamburger > summary::marker{ content:""; }

/* ハンバーガーの見た目 */
.hambtn{
  display:grid; place-items:center;
  width:80px; height:80px; border-radius:12px;
  background: transparent;
  border: 2px solid #fff;
  color:#fff;
}
.bars, .bars::before, .bars::after{
  content:""; display:block; width:50px; height:6px; background:currentColor; border-radius:2px;
  position:relative; transition: transform .2s ease, opacity .2s ease;
}
.bars::before{ position:absolute; top:-13px; left:0; }
.bars::after{  position:absolute; top: 13px; left:0; }

.hamburger.at-tr{
  position: fixed;
  top: var(--corner-pad,16px);
  right: var(--corner-pad,16px);
  z-index: 30;
}

.hamburger .list{
  font-size: clamp(20px, 1.4vw, 20px);
  font-weight: 600;
  position:absolute; top:calc(100% + 8px); right:0;
  min-width:300px; margin:0; padding:8px; display:grid; gap:6px;
  border-radius:12px; background:transparent;
  border:1px solid rgba(255,255,255,.22); box-shadow:0 10px 24px rgba(0,0,0,.38);
  backdrop-filter: blur(6px);
  overflow:hidden; max-height:0; opacity:0; transform:translateY(-6px);
  transform-origin: top right;
  transition:
    max-height .32s cubic-bezier(.2,.8,.2,1),
    opacity    .22s ease,
    transform  .28s cubic-bezier(.2,.8,.2,1);
}

.hamburger .list > *{
  opacity:0;
  transform: translateY(-6px);
  transition: opacity .24s ease, transform .28s cubic-bezier(.2,.8,.2,1);
}

.hamburger[open] .list{
  max-height:60vh; opacity:1; transform: translateY(0);
}

.hamburger[open] .list > *{ opacity:1; transform: translateY(0); }
.hamburger[open] .list > *:nth-child(1){ transition-delay: .05s; }
.hamburger[open] .list > *:nth-child(2){ transition-delay: .10s; }
.hamburger[open] .list > *:nth-child(3){ transition-delay: .15s; }
.hamburger[open] .list > *:nth-child(4){ transition-delay: .20s; }

.hamburger:not([open]) .list > *{ transition-delay: 0s !important; }

.hamburger .list a{
  display:block; padding:10px 12px; border-radius:10px; color:#fff; text-decoration:none; font-weight:600;
  transition: background .12s ease;
}
.hamburger .list a:hover{ background: rgba(255,255,255,.16); }

.hamburger[open] .list{
  max-height: 60vh;
  opacity: 1;
  transform: translateY(0);
}

.home-grid.layout-v2 { position: relative; }

.btn-stack{
  position: absolute;
  right: max(24px, 3vw);
  top: 50%;
  transform: translateY(-50%);
  z-index: 2;
}

.btn-briefcase{
  all: unset;
  position: absolute;
  right: max(24px, 3vw);  
  top: 100%;    
  left: auto;             
  bottom: auto;       
  transform: none;    
  z-index: 2;
}

/* バッグ画像 */
.btn-briefcase .fx{
  display:block;
  width: clamp(150px, 20vw, 230px);
  height:auto;
  transform-origin: center;
  filter:
    drop-shadow(0 0 10px rgba(255,255,255,.18))
    drop-shadow(0 6px 28px rgba(0,0,0,.65));
}

.btn-briefcase .label{
  font-weight:900; font-size: clamp(20px, 2.6vw, 28px);
  white-space: nowrap;
  position:absolute;
  left:50%;
  top:72%;
  transform: translate(-50%,-50%);
  padding: 15px 20px;
  color:#fff;
  font-size: clamp(20px, 2.2vw, 26px);
  letter-spacing:.05em;
  pointer-events:none;
}

.btn-briefcase:hover {
  animation: jitter 0.25s infinite steps(2,end);
}

.btn-briefcase.flash{
  animation: shock 1s steps(10,end), flashBlack 1s ease-out;
}

.img-wrap {
  position: relative;
  display: inline-block;
}

.base-img {
  width: 160px;
  filter: grayscale(40%);
}

.overlay-img {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 80px;
  transform: translate(-50%, -50%);
  pointer-events: none;
}

.overlay-img-small {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 35px;
  transform: translate(-50%, -50%);
  pointer-events: none;
}

.locked {
  pointer-events: none; 
  cursor: not-allowed;
  filter: grayscale(70%);
  position: relative;  
}

.btn-briefcase.disabled .label {
  color: #999;
}

@keyframes flashBlack{
  0%   { filter: brightness(0) contrast(1.2); }
  30%  { filter: brightness(0.2) contrast(1.2); }
  100% { filter: brightness(1) contrast(1); }
}

/* アニメーション */
@keyframes jitter{
  0%,100%{ transform: translate(0,0) }
  20%{ transform: translate(-2px,2px) }
  40%{ transform: translate(2px,2px) }
  60%{ transform: translate(-.6px,.6px) }
  80%{ transform: translate(.6px,-.6px) }
}
@keyframes shock{
  0%  { transform: translate(0,0) rotate(0) }
  25% { transform: translate(-2px,1px) rotate(-0.6deg) }
  50% { transform: translate( 2px,-1px) rotate( 0.6deg) }
  75% { transform: translate(-1px,1px) rotate( 0.3deg) }
  100%{ transform: translate(0,0) rotate(0) }
}

.meta {
  position: fixed;
  bottom: clamp(0.5rem, 1.2vh, 1rem);
  left: clamp(0.5rem, 1.2vw, 1rem);
  display: flex;
  align-items: center;
  gap: 12px;
  opacity: 0.8;
  font-size: clamp(12px, 1vw, 14px);
  pointer-events: none;
}

.tips{ font-size: 12px; opacity: .75; }

/* 角のアイコン配置 */
:root{
  --corner-pad: clamp(8px, 2vw, 24px); 
}
/* 上中央の名前プレート */
.nameplate{ grid-area: tc; justify-self:center; text-align:center;
  padding: 8px 18px; border-radius: 10px;
  background: transparent;
  border:2px solid rgba(255,255,255,.85);
  box-shadow: 0 8px 18px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.25);
  min-width: clamp(260px, 36vw, 520px);
}
.nameplate .dept{ font-weight:700; opacity:.9; letter-spacing:.08em; }
.nameplate .uname{ font-weight:900; font-size: clamp(20px, 2.6vw, 28px); }
.nameplate .level-stack{ font-weight:700; opacity:.9; letter-spacing:.08em; }

/* 中央キャラ */
.center-char{ grid-area: mc; display:grid; place-items:center; }
.center-char .char img{ width: clamp(400px, 150vw, 600px); }
.center-char .char-label{ text-align:center; margin-top:30px; opacity:.85; }

.center-char{
  position: relative;
  z-index: 0;
  transform: translateY(-6vh);
}

/* スマホは外側寄せを控えめに（任意） */
@media (max-width: 300px){
  :root{ --g-nudge: clamp(-14px, -2vw, -24px); }
}
.btn-icon{
	width: 24px;
	 height: 24px;
	 margin-right: 8px;
	 vertical-align: middle;
}

.home-grid.layout-v2{
  display:grid;
  grid-template-areas:
    "tl tc tr"
    "ml mc mr"
    "bl bc br";
  grid-template-columns: 1fr auto 1fr;
  grid-auto-rows: minmax(60px, auto);
  align-items: center;
  gap: clamp(18px, 3.2vw, 28px);
}
.diagnose-btn { 
  position: absolute;
  right: max(24px, 3vw);
  top: 25% !important;
  transform: translateY(-10%);
  z-index: 2;
}
.btn.small{ min-width: auto; padding: 8px 14px; font-size: clamp(24px, 1.6vw, 30px);  border: 2px solid #fff; }
