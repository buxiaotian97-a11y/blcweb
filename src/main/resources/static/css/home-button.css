:root { 
  --corner-pad: clamp(8px,2vw,20px);
  --gap-rc: clamp(10px, 1.4vw, 18px);
  --briefcase-w: clamp(150px, 20vw, 230px);
}



/* 上中央の名前プレート */
.nameplate{ grid-area: tc; justify-self:center; text-align:center;
  padding: 8px 18px; border-radius: 10px;
  background: transparent;
  border:2px solid rgba(255,255,255,.85);
  box-shadow: 0 8px 18px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.25);
  min-width: clamp(260px, 36vw, 520px);
}
.nameplate .dept{ font-weight:700; opacity:.9; letter-spacing:.08em; }
.nameplate .uname{ font-weight:900; font-size: clamp(20px, 2.6vw, 28px); }
.nameplate .level-stack{ font-weight:700; opacity:.9; letter-spacing:.08em; }

.center-char{ grid-area: mc; display:grid; place-items:center; }
.center-char .char img{ width: clamp(400px, 150vw, 600px); }
.center-char .char-label{ text-align:center; margin-top:30px; opacity:.85; }

.center-char{
  position: relative;
  z-index: 0;
  transform: translateY(-6vh);
}

@media (max-width: 300px){
  :root{ --g-nudge: clamp(-14px, -2vw, -24px); }
}



/* ハンバーガー */
.hamburger.at-tr{ position:fixed; top:var(--corner-pad); right:var(--corner-pad); z-index:30; }

.hamburger > summary{ list-style:none; appearance:none; cursor:pointer; }
.hamburger > summary::-webkit-details-marker{ display:none; }
.hamburger > summary::marker{ content:""; }

.hambtn{
  display:grid; place-items:center;
  width:80px; height:80px; border-radius:12px;
  background: transparent;
  border: 2px solid #fff;
  color:#fff;
}
.bars, .bars::before, .bars::after{
  content:""; display:block; width:50px; height:6px; background:currentColor; border-radius:2px;
  position:relative; transition: transform .2s ease, opacity .2s ease;
}
.bars::before{ position:absolute; top:-13px; left:0; }
.bars::after{  position:absolute; top: 13px; left:0; }

.hamburger.at-tr{
  position: fixed;
  top: var(--corner-pad,16px);
  right: var(--corner-pad,16px);
  z-index: 30;
}

.hamburger .list{
  font-size: clamp(20px, 1.4vw, 20px);
  font-weight: 600;
  position:absolute; top:calc(100% + 8px); right:0;
  min-width:300px; margin:0; padding:8px; display:grid; gap:6px;
  border-radius:12px; background:transparent;
  border:1px solid rgba(255,255,255,.22); box-shadow:0 10px 24px rgba(0,0,0,.38);
  backdrop-filter: blur(6px);
  overflow:hidden; max-height:0; opacity:0; transform:translateY(-6px);
  transform-origin: top right;
  transition:
    max-height .32s cubic-bezier(.2,.8,.2,1),
    opacity    .22s ease,
    transform  .28s cubic-bezier(.2,.8,.2,1);
}

.hamburger .list > *{
  opacity:0;
  transform: translateY(-6px);
  transition: opacity .24s ease, transform .28s cubic-bezier(.2,.8,.2,1);
}

.hamburger[open] .list{
  max-height:60vh; opacity:1; transform: translateY(0);
}

.hamburger[open] .list > *{ opacity:1; transform: translateY(0); }
.hamburger[open] .list > *:nth-child(1){ transition-delay: .05s; }
.hamburger[open] .list > *:nth-child(2){ transition-delay: .10s; }
.hamburger[open] .list > *:nth-child(3){ transition-delay: .15s; }
.hamburger[open] .list > *:nth-child(4){ transition-delay: .20s; }

.hamburger:not([open]) .list > *{ transition-delay: 0s !important; }

.hamburger .list a{
  display:block; padding:10px 12px; border-radius:10px; color:#fff; text-decoration:none; font-weight:600;
  transition: background .12s ease;
}
.hamburger .list a:hover{ background: rgba(255,255,255,.16); }

.hamburger[open] .list{
  max-height: 60vh;
  opacity: 1;
  transform: translateY(0);
}



/* 画面が縦に浅いときはさらに上げる */
@media (max-height: 700px){
  .rb-actions{
    bottom: calc(max(var(--corner-pad), env(safe-area-inset-bottom)) + 18px);
  }
}

.home-grid.layout-v2 { position: relative; }

.overlay-img-small {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 35px;
  transform: translate(-50%, -50%);
  pointer-events: none;
}

.meta {
  position: fixed;
  bottom: clamp(0.5rem, 1.2vh, 1rem);
  left: clamp(0.5rem, 1.2vw, 1rem);
  display: flex;
  align-items: center;
  gap: 12px;
  opacity: 0.8;
  font-size: clamp(12px, 1vw, 14px);
  pointer-events: none;
}

:root{
  --corner-pad: clamp(8px, 2vw, 24px); 
}

.btn-icon{
	width: 24px;
	 height: 24px;
	 margin-right: 8px;
	 vertical-align: middle;
}

.home-grid.layout-v2{
  display:grid;
  grid-template-areas:
    "tl tc tr"
    "ml mc mr"
    "bl bc br";
  grid-template-columns: 1fr auto 1fr;
  grid-auto-rows: minmax(60px, auto);
  align-items: center;
  gap: clamp(18px, 3.2vw, 28px);
}

/* 画像を重ねる */
.img-wrap {
  position: relative;
  display: inline-block;
}

.locked {
  pointer-events: none; 
  cursor: not-allowed;
  filter: grayscale(70%); 
}

.btn.small{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;       
  min-width: 120px;       
  height: 56px;
  padding: 8px 14px;
  border: 2px solid #fff;
  font-size: clamp(24px, 1.6vw, 30px);
}

.rb-actions{
  position: fixed;
  right: calc(max(var(--corner-pad), env(safe-area-inset-right)) + 8px);
  bottom: calc(max(var(--corner-pad), env(safe-area-inset-bottom)) + 10px);
  display: flex;
  align-items: flex-end;
  gap: var(--gap-rc);
  z-index: 30;
}

.diagnose-btn{ 
  position: static; 
  transform: none;
  z-index: auto;
}

.rb-actions .diagnose-btn{
  position: static !important;
  inset: auto !important;
  z-index: auto !important;
  margin: 0;          
  flex: 0 0 auto;
}