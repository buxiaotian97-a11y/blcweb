@font-face {
  font-family: 'GenEiAntique';
  src: url('/fonts/GenEiAntiqueNv2.otf') format('opentype');
}
:root{
  --tile: clamp(120px, 12vw, 200px);
  --shift: calc(var(--tile) / 2); 
}

body{
  min-height: 100vh;

  background-image:
    linear-gradient(rgba(0,0,0,.45), rgba(0,0,0,.45)),
    url("/images/sarari-1.png"),
    url("/images/sarari-1.png");

  background-size:
    auto,
    clamp(50px, 50vw, 50px) auto,
    var(--tile) auto,
    var(--tile) auto;

  background-repeat:
    no-repeat,
    no-repeat,
    repeat,
    repeat;

  background-color: #000;

  background-blend-mode:
    normal, 
    normal,  
    multiply, 
    multiply;
}


:root{
  --tile: clamp(120px, 12vw, 200px);
  --shift: calc(var(--tile) / 2);
}

/* レイヤー用の土台 */
body { position: relative; overflow: hidden; }


body::before,
body::after{
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  mix-blend-mode: multiply;
  opacity: .14;
  z-index: 0;             
  background-image: url("/images/sarari-1.png");
  background-size: var(--tile) auto;
  background-repeat: repeat;
  will-change: background-position, opacity;
}

/* 斜交いの２層で“ざわざわ”を演出 */
body::before{
  background-position: 0 0;
  animation: pan-a 22s linear infinite;
}
body::after{
  background-position: var(--shift) var(--shift);
  animation: pan-b 28s linear infinite reverse;
  opacity: .12;
}

@keyframes pan-a{
  0%   { background-position:   0    0; }
  100% { background-position: var(--tile) var(--tile); } /* 周期でシームレス */
}
@keyframes pan-b{
  0%   { background-position: var(--shift) var(--shift); }
  100% { background-position: calc(var(--shift) + var(--tile))
                               calc(var(--shift) + var(--tile)); }
}
/* 文字を最前面に（必要なら） */
.title-wrap{ position: relative; z-index: 3; }

/* グリッチ層 */
#vhs-glitch{
  position: fixed; inset: 0;
  pointer-events: none;
  z-index: 2; /* ビル等の前、文字の下 */
}

/* 細い水平ノイズ線 */
.gl-line{
  position: absolute; left: -12px; width: calc(100% + 24px);
  background: linear-gradient(to right,
    transparent 0%,
    rgba(255,255,255,.85) 18%,
    rgba(255,255,255,.85) 82%,
    transparent 100%);
  mix-blend-mode: screen;
  opacity: .7;
  filter: blur(.2px);
  animation: lineFlash 160ms ease-out forwards;
}
.gl-line.rgb{
  background: linear-gradient(to right,
    transparent 0%,
    rgba(255,70,70,.85) 22%,
    rgba(60,160,255,.85) 78%,
    transparent 100%);
}

@keyframes lineFlash{
  0%   { opacity: 0;   transform: translateX(0); }
  12%  { opacity: .7;  transform: translateX(-1px); }
  45%  { opacity: .9;  transform: translateX(1px); }
  80%  { opacity: .25; transform: translateX(0); }
  100% { opacity: 0; }
}

/* 追い込み帯（太めの横帯が一瞬ズレる） */
.gl-band{
  --shift: 8px;
  position: absolute; left: -16px; width: calc(100% + 32px);
  background:
    linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,.12) 40%, rgba(255,255,255,.12) 60%, rgba(255,255,255,0)),
    repeating-linear-gradient(to right, rgba(255,255,255,.12) 0 1px, transparent 1px 2px);
  mix-blend-mode: screen;
  opacity: .5;
  filter: contrast(120%) brightness(110%);
  animation: bandJitter 220ms steps(2,end) forwards;
}

@keyframes bandJitter{
  0%   { transform: translateX(0);                 opacity: .25; }
  25%  { transform: translateX(var(--shift));      opacity: .55; }
  50%  { transform: translateX(calc(var(--shift) * -0.6)); opacity: .45; }
  75%  { transform: translateX(calc(var(--shift) * 0.35));  opacity: .38; }
  100% { transform: translateX(0);                 opacity: 0; }
}
