<!doctype html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8" />
  <title>診断結果 | Black Company Simulator</title>
  <link rel="stylesheet" href="/css/question.css" />
  <link rel="stylesheet" href="/css/button.css" />
  <link rel="stylesheet" href="/css/result.css" />
  <link rel="stylesheet" href="/css/font.css" />
  <link rel="stylesheet" th:href="@{/css/scroll.css}" href="/css/scroll.css">

</head>
<body class="result"
      th:classappend="${backed != null ? ' ' + backed : ''}">
	<main class="result-screen">
      <div class="scanlines"></div>
	  <div class="result-bubble result-box">
	    <p class="label">あなたのブラック度は、、、</p>
		<p class="score" th:text="${score + '点'}"></p>
		<p class="label" th:text="${resultMsg}"></p>
		<p th:text="${modeMsg}"></p>

	  </div>
	  
	  <div class="fade-to-light" id="fadeEffect"></div>

	  <div th:if="${unlocked and showNormalButtons}">
	    <a href="/nework" class="btn feature" id="toNework">新たな道へ</a>
	  </div>

	  <div th:if="${!unlocked and showNormalButtons}">
	    <button class="btn feature locked" disabled>工事中</button>
	  </div>
	  
	  <div th:if="${specialMode}" class="work">
	     <a href="/work" class="btn rpg" id="toNework">現実へログインする</a>
	  </div>

	  <div class="button-area">
	    <a href="/home" class="btn small font2">ホームへ戻る</a>
	    <a href="/mode" class="btn small font2">もう一度診断する</a>
	  </div>
	</main>
	
	<script>
	document.addEventListener("DOMContentLoaded", () => {
	  const link = document.getElementById("toNework");
	  const effect = document.getElementById("fadeEffect"); 

	  link.addEventListener("click", (e) => {
	    e.preventDefault();

	    if (document.startViewTransition) {
	      document.startViewTransition(() => {
	        window.location.href = link.href;
	      });
	      return;
	    }
	    effect.classList.add("active");
	    void effect.offsetWidth;
	    window.location.href = link.href;
	  });
	});
	</script>

</body>
